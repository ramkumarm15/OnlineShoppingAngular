<main>
  <div class="container">
    <div class="row min-vh-100 d-flex justify-content-center align-items-center">
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h3 class="text-center mb-4">Sign in to store</h3>
            <form class="form" [formGroup]="loginForm" (ngSubmit)="formSubmit()">
              <div class="form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Username</mat-label>
                  <input matInput placeholder="Hey, what's your username?" name="username" id="username"
                    formControlName="username" required [ngClass]="{
                      'is-invalid':
                        loginForm.controls['username'].invalid &&
                        loginForm.controls['username'].touched,
                      'is-valid': loginForm.controls['username'].valid
                    }" />
                  <mat-error
                    *ngIf="(loginForm.controls['username'].touched || loginForm.invalid) && loginForm.controls['username'].errors?.['required']">
                    Username is required
                  </mat-error>
                  <mat-error
                    *ngIf="(loginForm.controls['username'].touched || loginForm.invalid) && loginForm.controls['username'].errors?.['minlength']">
                    Minimum length is 8 characters
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="form-group">
                <mat-form-field appearance="outline" class="passwordInput">
                  <mat-label>Password</mat-label>
                  <input [type]="passwordHide ? 'password' : 'text'" matInput placeholder="Same password everywhere? 😏"
                    name="password" id="password" formControlName="password" required [ngClass]="{
                      'is-invalid':
                        loginForm.controls['password'].invalid &&
                        loginForm.controls['password'].touched,
                      'is-valid': loginForm.controls['password'].valid
                    }" />
                  <button type="button" mat-icon-button matSuffix (click)="passwordHide = !passwordHide"
                    [attr.aria-label]="'Hide password'" [attr.aria-pressed]="passwordHide">
                    <mat-icon>{{
                      passwordHide ? "visibility_off" : "visibility"
                      }}</mat-icon>
                  </button>
                  <mat-error
                    *ngIf="( loginForm.controls['password'].touched || loginForm.invalid) && loginForm.controls['password'].errors?.['required']">
                    Password is required
                  </mat-error>
                  <mat-error
                    *ngIf="(loginForm.controls['password'].touched || loginForm.invalid)&& loginForm.controls['password'].errors?.['minlength']">
                    Minimum length is 8 characters
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="form-group text-center mb-3">
                <button type="submit" class="btn btn-primary btn-lg" id="submit">
                  Login
                </button>
              </div>
            </form>
            <div class="text-center mt-3">
              <p>
                New user?
                <a class="text-primary" [routerLink]="['/register']">Create an account</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>